<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>new layer menu tests</title>
    <!---
    <script src="pinchzoom.js" defer></script>
    <script src="main.js" defer></script>-->
    <link rel="stylesheet" href="../src/styles/main.css">

    <script>
        window.onload = e => {



            var apanzoom = panzoom(document.getElementById("newLayerWrapper"), {
                smoothScroll: false,
                initialZoom: 10,
                zoomSpeed: 0.15,
                onDoubleClick: function (e) {
                    return false;
                },
                beforeMouseDown: function (e) {
                    return e.button != 1;
                },
                beforeTouchDown: function (e) {
                    return !(e.touches.length > 1);
                },
                zoomDoubleClickSpeed: 1,
                maxZoom: 200,
                minZoom: 0.1,
            });
            var _self = this;
            apanzoom.on("transform", function (e) {
                // This event will be called along with events above.
                    _self.boundingGroup.style.transform =
                    _self.selectionGroup.style.transform =
                    _self.cursorSVG.style.transform =
                    _self.bggridcanvas.style.transform =
                    _self.canvaslayersparent.style.transform;
                    _self.boundingGroup.style.transformOrigin =
                    _self.selectionGroup.style.transformOrigin =
                    _self.cursorSVG.style.transformOrigin =
                    _self.bggridcanvas.style.transformOrigin =
                    _self.canvaslayersparent.style.transformOrigin;
            });
        }</script>
    <script src="../src/scripts/panzoom.js"></script>
</head>

<body>
    <div id="cursor" class="invertBackground">
    </div>
    <div class="menu">
        <div class="menu-btn" onclick="newProject()">New</div>
        <div class="menu-btn" onclick="saveFile()">Save</div>
        <div class="menu-btn" onclick="openFile()">Open</div>
        <div class="menu-btn" onclick="openExportMenu()">Export</div>
        <div class="menu-btn" onclick="openSettingsWindow()">Settings</div>
    </div><input type="file" id="fileOpenDialog"
        style="display: hidden; visibility:
                                                                        hidden; height: 0px; width: 0px; pointer-events: none;" accept=".bspr">

    <div class="color-menu" id="color-menu" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);"
        ondragleave="dragLeaveHandler(event);" ondragend="dragLeaveHandler(event);">
        <div id="color-menu-drop-effect">Import Palette</div>
        <div id="color-menu-drop-err">Could Not Import Palette</div>
        <div class="color-selector-wrap">
            <div class="color-selector" id="color-value" width="200" height="200"
                onmousedown="valueThumb(event);valueDrag(event);" onmousemove="valueDrag(event)"
                onmouseup="valueEndDrag(event)" ontouchstart="valueThumb(event);" ontouchmove="valueDrag(event)"
                ontouchend="valueEndDrag(event)">
                <div id="color-value-thumb" onmousedown="valueThumb(event);valueDrag(event);"
                    onmousemove="valueDrag(event)" onmouseup="valueEndDrag(event)"
                    ontouchstart="valueThumb(event);valueDrag(event);" ontouchmove="valueDrag(event)"
                    ontouchend="valueEndDrag(event)"></div>
            </div>
            <!--
                                                                                                                                                  -->
            <div class="color-selector" id="color-hue" width="40" height="200"
                onmousedown="hueThumb(event);hueDrag(event);" onmousemove="hueDrag(event)" onmouseup="hueEndDrag(event)"
                ontouchstart="hueThumb(event);hueDrag(event);" ontouchmove="hueDrag(event)"
                ontouchend="hueEndDrag(event)">
                <div id="color-hue-thumb" onmousedown="hueThumb(event);hueDrag(event);" onmousemove="hueDrag(event)"
                    onmouseup="hueEndDrag(event)" ontouchstart="hueThumb(event);hueDrag(event);"
                    ontouchmove="hueDrag(event)" ontouchend="hueEndDrag(event)"></div>
            </div>
            <!--
                                                                                                                                                  -->
            <div class="color-selector" id="color-opacity" width="40" height="200"
                onmousedown="opacityThumb(event);opacDrag(event);" onmouseup="opacEndDrag(event)"
                onmousemove="opacDrag(event)" ontouchstart="opacityThumb(event);opacDrag(event);"
                ontouchend="opacEndDrag(event)" ontouchmove="opacDrag(event)">
                <div id="color-opacity-thumb" onmousedown="opacityThumb(event);opacDrag(event);"
                    onmousemove="opacDrag(event)" onmouseup="opacEndDrag(event)"></div>
            </div>
        </div>
        <div class="color-data">
            <div class="color-rgba">
                <p>R</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-rgba-r" value="255" min="0" max="255" type="number"
                    data-color-input />
                <!--
                                                                                                                                                    -->
                <p>G</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-rgba-g" value="255" min="0" data-color-input max="255"
                    type="number" />
                <!--
                                                                                                                                                      -->
                <p>B</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-rgba-b" value="255" min="0" data-color-input max="255"
                    type="number" />
                <!--
                                                                                                                                                        -->
                <p>A</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-rgba-a" value="255" min="0" data-color-input max="255"
                    type="number" />
            </div>
            <div id="color-preview" onclick="colorPreviewClickHandler(event)"
                ontouchstart="colorPreviewClickHandler(event)">
                <div id="color-previous"></div>
                <div id="color-current"></div>
            </div>
        </div>
        <div class="color-data">
            <div class="color-hsla">
                <p>H</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" data-color-input id="color-hsla-h" value="0" min="0" max="360" maxlength="3"
                    type="number" />
                <!--
                                                                                                                                                    -->
                <p>S</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-hsla-s" value="100" min="0" data-color-input max="100"
                    type="number" />
                <!--
                                                                                                                                                      -->
                <p>L</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-hsla-l" value="100" min="0" data-color-input max="100"
                    type="number" />
                <!--
                                                                                                                                                        -->
                <p>A</p>
                <!--
                                                                                                                                                    --><input
                    class="color-input-num" id="color-hsla-a" value="100" min="0" data-color-input max="100"
                    type="number" />
                <p class="label-hex">#</p>
                <!--
                                                                                                                                                      --><input
                    class="color-input-hex" maxlength="8" id="color-data-hex" data-color-input value="ffffff"
                    type="text" />
            </div>
        </div>
        <div id="palettes" class="drop_zone">
        </div>
    </div><div class="layer-menu layer-open" id="layer-menu">
        <div class="layer-menu-controls">
            <button class="layer-menu-button">
                <i class="hi-copy-fill"></i>
            </button>
            <button class="layer-menu-button">
                <i class="hi-trash-fill"></i>
            </button>
            <button class="layer-menu-button">
                <i class="hi-folder-fill"></i>
            </button>
            <button onclick="newLayer()" class="layer-menu-button">
                <i class="hi-plus-large-line"></i>
            </button>
        </div>
        <div id="layer-main">
            <div id="layer-position-preview-horizontal"></div>
        </div>
    </div><div id="popup" class="popup">
        <div class="popup-top-bar">
            <h1>New File</h1>
        </div>
        <div class='popup-content'>
            <div class="popup-preset-group" id="popup-presets">
            </div>
            <div class="popup-sidebar">
                <span class="popup-input-group">
                    <p class="popup-input-title">Width</p>
                    <div class="popup-input-wrap">
                        <div class="popup-input-field">
                            <input data-input-num-draggable class="popup-input-num" type="number" id="width"
                                value="16" />
                            <p class="popup-input-unit">px</p>
                        </div>
                    </div>
                </span>
                <span class="popup-input-group">
                    <p class="popup-input-title">Height</p>
                    <div class="popup-input-wrap">
                        <div class="popup-input-field">
                            <input data-input-num-draggable class="popup-input-num" type="number" id="height"
                                value="16" />
                            <p class="popup-input-unit">px</p>
                        </div>
                    </div>
                </span>
                <div class="popup-btn-group">
                    <button onclick="confirmNewProject()" id="close" class="popup-btn popup-btn-imp">OK</button>
                    <button onclick="closePopup()" class="popup-btn">Cancel</button>
                </div>
            </div>
        </div>

    </div>
    <div id="export-menu" class="export-menu">
        <div class="popup-top-bar">
            <h1>Export</h1>
        </div>
        <div class='popup-column' class="" style="--maxHeight: 136px;">
            <span class="popup-input-group">
                <p class="popup-input-title">File Name</p>
                <div class="popup-input-wrap">
                    <div class="popup-input-field">
                        <input class="popup-input-text" id="export-file-name" type="text" value="canvas">
                        <p class="popup-input-unit" id="export-name-extension">.png</p>
                    </div>
                </div>
            </span>
            <span class="popup-input-group">
                <p class="popup-input-title">File Type</p>
                <div class="popup-input-wrap">
                    <div class="popup-input-field">
                        <select name="type" id="export-file-type" value="png"
                            oninput="document.getElementById('export-name-extension').innerHTML=
                                                                                                                                                                                                                                          '.' + this.value"
                            class="popup-input-select">
                            <option value="png" selected>.png</option>
                            <option value="jpeg">.jpeg</option>
                            <option value="bmp">.bmp</option>
                        </select>
                    </div>
                </div>
            </span>
            <span class="popup-input-group">
                <p class="popup-input-title">Scale</p>
                <div class="popup-input-wrap">
                    <div class="popup-input-field">
                        <select name="type" id="export-scale" value="1" class="popup-input-select">
                            <option value="1" selected>1x</option>
                            <option value="2">2x</option>
                            <option value="3">3x</option>
                            <option value="4">4x</option>
                            <option value="5">5x</option>
                            <option value="6">6x</option>
                            <option value="7">7x</option>
                            <option value="8">8x</option>
                            <option value="9">9x</option>
                            <option value="10">10x</option>
                            <option value="25">25x</option>
                            <option value="50">50x</option>
                            <option value="100">100x</option>
                        </select>
                    </div>
                </div>
            </span>
            <div class="popup-btn-group">
                <button onclick="exportFile()" class="popup-btn popup-btn-imp">OK</button>
                <button onclick="closeExportMenu()" class="popup-btn">Cancel</button>
            </div>
        </div>
    </div>
    <div id="canvas-parent" customcursor>
        <svg id="cursorSVG" customcursor></svg>
        <svg id="selectionSVG" customcursor>
            <g id="selectionGroup"></g>
        </svg>
        <svg id='boundingSVG' class="boundingHidden">
            <g stroke="var(--important)" id="boundingGroup">
                <rect id="boundingRect" x="10" y="10" width="100" height="100" fill="none" />
                <line id="boundingRotLine" x1="60" y1="-5" x2="60" y2="10" />
                <circle class="boundingRectCircleHandle boundingRectHandle-bl" cx="10" cy="10" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-br" cx="110" cy="10" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-tl" cx="10" cy="110" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-tr" cx="110" cy="110" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-bm" cx="60" cy="10" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-ml" cx="10" cy="60" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-tm" cx="60" cy="110" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-mr" cx="110" cy="60" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-rot" cx="60" cy="-5" r="5" fill="white" />
            </g>
        </svg>
        <div id="layers-wrap" customcursor>
            <canvas id="previewcanv" customcursor></canvas>
        </div>
        <canvas id="bggridcanv" customcursor></canvas>
    </div>
    <svg id="newLayerWrapper" customcursor viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
        <foreignObject class="drawingCanvas" x=" 0" y="0" width="100%" height="100%">
            <img id="img"
                src="https://cdn.discordapp.com/attachments/656343660241223697/1016921977128230952/canvas.png">
        </foreignObject>
    </svg>
</body>

</html>