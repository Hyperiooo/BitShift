<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>new layer menu tests</title>
    <!---
    <script src="pinchzoom.js" defer></script>
    <script src="main.js" defer></script>-->
    <link rel="stylesheet" href="../src/styles/main.css">

    <script>
        window.onload = e => {



            var apanzoom = panzoom(document.getElementById("newLayerWrapper"), {
                smoothScroll: false,
                initialZoom: 10,
                zoomSpeed: 0.15,
                onDoubleClick: function (e) {
                    return false;
                },
                beforeMouseDown: function (e) {
                    return e.button != 1;
                },
                beforeTouchDown: function (e) {
                    return !(e.touches.length > 1);
                },
                zoomDoubleClickSpeed: 1,
                maxZoom: 200,
                minZoom: 0.1,
            });
            var _self = this;
            apanzoom.on("transform", function (e) {
                // This event will be called along with events above.
                _self.newLayerWrapperSVG.style.transform =
                    _self.boundingGroup.style.transform =
                    _self.selectionGroup.style.transform =
                    _self.cursorSVG.style.transform =
                    _self.bggridcanvas.style.transform =
                    _self.canvaslayersparent.style.transform;
                _self.newLayerWrapperSVG.style.transformOrigin =
                    _self.boundingGroup.style.transformOrigin =
                    _self.selectionGroup.style.transformOrigin =
                    _self.cursorSVG.style.transformOrigin =
                    _self.bggridcanvas.style.transformOrigin =
                    _self.canvaslayersparent.style.transformOrigin;
            });
        }</script>
    <script src="../src/scripts/panzoom.js"></script>
</head>

<body><div id="export-menu" class="export-menu">
    <div class="popup-top-bar">
        <h1>Export</h1>
    </div>
    <div class='popup-column' class="" style="--maxHeight: 136px;">
        <span class="popup-input-group">
            <p class="popup-input-title">File Name</p>
            <div class="popup-input-wrap">
                <div class="popup-input-field">
                    <input class="popup-input-text" id="export-file-name" type="text" value="canvas">
                    <p class="popup-input-unit" id="export-name-extension">.png</p>
                </div>
            </div>
        </span>
        <span class="popup-input-group">
            <p class="popup-input-title">File Type</p>
            <div class="popup-input-wrap">
                <div class="popup-input-field">
                    <select name="type" id="export-file-type" value="png" oninput="document.getElementById('export-name-extension').innerHTML=
                  '.' + this.value" class="popup-input-select">
                        <option value="png" selected>.png</option>
                        <option value="jpeg">.jpeg</option>
                        <option value="bmp">.bmp</option>
                    </select>
                </div>
            </div>
        </span>
        <span class="popup-input-group">
            <p class="popup-input-title">Scale</p>
            <div class="popup-input-wrap">
                <div class="popup-input-field">
                    <select name="type" id="export-scale" value="1" class="popup-input-select">
                        <option value="1" selected>1x</option>
                        <option value="2">2x</option>
                        <option value="3">3x</option>
                        <option value="4">4x</option>
                        <option value="5">5x</option>
                        <option value="6">6x</option>
                        <option value="7">7x</option>
                        <option value="8">8x</option>
                        <option value="9">9x</option>
                        <option value="10">10x</option>
                        <option value="25">25x</option>
                        <option value="50">50x</option>
                        <option value="100">100x</option>
                    </select>
                </div>
            </div>
        </span>
        <div class="popup-btn-group">
            <button onclick="exportFile()" class="popup-btn popup-btn-imp">OK</button>
            <button onclick="closeExportMenu()" class="popup-btn">Cancel</button>
        </div>
    </div>
</div>
    <div id="topbar" class="ui">
        <div id="topbar-left">
            <span class="item" onclick="openGallery()"><i class="hi-left-arrow-large-line"></i></span>
            <button class="topbar-button" onclick="toggleMenu()">
                File
            </button>
            <button class="item" onclick="openExportMenu()" id="exportButton"><i class="hi-export-line"></i></butt>
        </div>

        <input style="visibility: hidden;display: none;" type="text" id="topbar-project-name" value=""
            onblur="renameProject(this)">

        <div id="tool-settings-content"></div><div id="topbar-right">
        
            <span class="item" onclick="undo()"><i class="hi-undo-line"></i></span>
            <span class="item" onclick="redo()"><i class="hi-redo-line"></i></span>
            <span class="toolbar-divider"></span>
            <span id="layer-toggle-button" class="item" onclick="toggleLayerMenu()"><i class="hi-layer-fill"></i></span>
        </div>
    </div>
    <div id="canvas-parent" customcursor>
        <svg id="cursorSVG" customcursor></svg>
        <svg id="selectionSVG" customcursor>
            <g id="selectionGroup"></g>
        </svg>
        <svg id='boundingSVG' class="boundingHidden">
            <g stroke="var(--important)" id="boundingGroup">
                <rect id="boundingRect" x="10" y="10" width="100" height="100" fill="none" />
                <line id="boundingRotLine" x1="60" y1="-5" x2="60" y2="10" />
                <circle class="boundingRectCircleHandle boundingRectHandle-bl" cx="10" cy="10" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-br" cx="110" cy="10" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-tl" cx="10" cy="110" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-tr" cx="110" cy="110" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-bm" cx="60" cy="10" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-ml" cx="10" cy="60" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-tm" cx="60" cy="110" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-mr" cx="110" cy="60" r="5" fill="white" />
                <circle class="boundingRectCircleHandle boundingRectHandle-rot" cx="60" cy="-5" r="5" fill="white" />
            </g>
        </svg>
        <div id="layers-wrap" customcursor>
            <canvas id="previewcanv" customcursor></canvas>
        </div>
        <canvas id="bggridcanv" customcursor></canvas>
    </div>
    <svg id="newLayerWrapper" customcursor viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
        <foreignObject class="drawingCanvas" x=" 0" y="0" width="100%" height="100%">
            <img id="img"
                src="https://cdn.discordapp.com/attachments/656343660241223697/1016921977128230952/canvas.png">
        </foreignObject>
    </svg>
</body>

</html>